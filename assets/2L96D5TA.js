import{r as e,j as i,e as t,l,q as a,t as n,i as d,h as o,b as r,c as u,S as c,d as s}from'./index-pvoCxIDX.js';import{B as m}from'./C3Zlwr2N.js';var b=n('<mdui-text-field label="Secret key *"required>',!0,!1,!1),h=n('<p>Enter a secret key that will be required when you want to delete or change'),p=n('<br>'),g=n('<main><h1 class="py-10 text-5xl font-medium leading-tight"></h1><form><mdui-text-field label="Plugin name *"required></mdui-text-field><p>Package name is easy to understand what it does, example: "Smart Manager"</p><br><mdui-text-field label="Download link *"required></mdui-text-field><p>You can use the link from Google Drive as follows: https://drive.google.com/file/d/abcdef. Alternatively, you can also use the hotlinks from GitHub Release or the links that can directly download the file you already have. Note that the zip file must be under 30MB.</p><br><mdui-text-field label="Author upload *"required></mdui-text-field><p>Your name</p><br><mdui-text-field autosize min-rows=2 max-rows=5 label="Additional information"></mdui-text-field><p>Additional information such as author, link to source code if available</p><br><div><p>OneUI compatible *</p><div><mdui-checkbox>All</mdui-checkbox></div><div><mdui-checkbox>5.1</mdui-checkbox></div><div><mdui-checkbox>6.0</mdui-checkbox></div><div><mdui-checkbox>6.1</mdui-checkbox></div></div></form><div class="flex justify-end gap-2">',!0,!1,!1);const x=()=>{const n=e(),s=n.id,[x,f]=i({name:'',downloadUrl:'',secretKey:'',uploadAuthor:'',additionalInfo:'',compatible:[]}),v=(e,i)=>{f((t=>({...t,[e]:i})))},w=e=>{const i=x().compatible.includes(e);f(i?i=>({...i,compatible:i.compatible.filter((i=>i!==e))}):i=>({...i,compatible:[...i.compatible,e]}))},k=t((()=>{const e=x().name&&x().downloadUrl&&x().uploadAuthor&&x().compatible.length>0;return s?e:e&&x().secretKey})),S=async()=>{await a.addPlugin(x())};l((async()=>{if(n){const{status:e,data:i}=await a.getPlugin(s);200===e&&f({name:i.name,downloadUrl:i.downloadUrl,secretKey:'',uploadAuthor:i.uploadAuthor,additionalInfo:i.additionalInfo,compatible:i.compatible})}}));const $=()=>{};return y=g(),A=y.firstChild,C=A.nextSibling,_=C.firstChild,U=_.nextSibling.nextSibling.nextSibling,q=U.nextSibling.nextSibling.nextSibling,E=q.nextSibling.nextSibling.nextSibling,I=E.nextSibling.nextSibling.nextSibling.firstChild.nextSibling,P=I.firstChild,K=I.nextSibling,j=K.firstChild,L=K.nextSibling,z=L.firstChild,B=L.nextSibling.firstChild,D=C.nextSibling,d(A,s?'Edit Plugin':'Add Plugin'),_.$$input=e=>v('name',e.target.value),_._$owner=o(),U.$$input=e=>v('downloadUrl',e.target.value),U._$owner=o(),d(C,r(c,{when:!s,get children(){return[(e=b(),e.$$input=e=>v('secretKey',e.target.value),e._$owner=o(),u((()=>e.value=x().secretKey)),e),h(),p()];var e}}),q),q.$$input=e=>v('uploadAuthor',e.target.value),q._$owner=o(),E.$$input=e=>v('additionalInfo',e.target.value),E._$owner=o(),P.addEventListener('change',(e=>{e.target.checked?f((e=>({...e,compatible:['5.1','6.0','6.1']}))):f((e=>({...e,compatible:[]})))})),P._$owner=o(),j.addEventListener('change',(()=>w('5.1'))),j._$owner=o(),z.addEventListener('change',(()=>w('6.0'))),z._$owner=o(),B.addEventListener('change',(()=>w('6.1'))),B._$owner=o(),d(D,r(m,{variant:'tonal',title:'Cancel'}),null),d(D,r(m,{get disabled(){return!k()},title:s?'Update plugin':'Add plugin',onClick:s?$:S}),null),u((()=>_.value=x().name)),u((()=>U.value=x().downloadUrl)),u((()=>q.value=x().uploadAuthor)),u((()=>E.value=x().additionalInfo)),u((()=>P.checked=3==x().compatible.length)),u((()=>j.checked=x().compatible.includes('5.1'))),u((()=>z.checked=x().compatible.includes('6.0'))),u((()=>B.checked=x().compatible.includes('6.1'))),y;var y,A,C,_,U,q,E,I,P,K,j,L,z,B,D};s(['input']);export{x as default};
